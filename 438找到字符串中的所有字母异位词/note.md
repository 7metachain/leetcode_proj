# 438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ â€”â€” å­¦ä¹ ç¬”è®°

---

## ä¸€ã€æˆ‘çš„åŸå§‹æ€è·¯ & ä¿®æ­£åçš„æ ‡å‡†æ€è·¯

### 1ï¸âƒ£ æˆ‘çš„åŸå§‹æ€è·¯ï¼ˆæ’åº + æ»‘åŠ¨çª—å£ï¼‰

**æ ¸å¿ƒæƒ³æ³•ï¼š**
- åœ¨å­—ç¬¦ä¸² `s` ä¸­ä½¿ç”¨ä¸€ä¸ª**å›ºå®šé•¿åº¦ä¸º |p| çš„æ»‘åŠ¨çª—å£**
- æ¯æ¬¡å–å‡ºçª—å£å­ä¸²
- **å¯¹çª—å£å­ä¸²æ’åº**
- ä¸æå‰æ’åºå¥½çš„ `p` ä½œæ¯”è¾ƒ
- å¦‚æœç›¸ç­‰ï¼Œè¯´æ˜æ˜¯å¼‚ä½è¯

**ä¼ªä»£ç æ€è·¯ï¼š**
```
sort(p) â†’ key
for æ¯ä¸ªé•¿åº¦ä¸º |p| çš„å­ä¸² t in s:
    if sort(t) == key:
        è®°å½•èµ·å§‹ç´¢å¼•
```

**ä¼˜ç‚¹ï¼š**
- æ€è·¯ç›´è§‚
- éå¸¸ç¬¦åˆ"å¼‚ä½è¯ = æ’åºåç›¸ç­‰"çš„ç›´è§‰

**é—®é¢˜ï¼ˆè‡´å‘½ï¼‰ï¼š**
- æ¯ä¸ªçª—å£éƒ½è¦æ’åº
- æ—¶é—´å¤æ‚åº¦ï¼š`O(n Â· m log m)`
- åœ¨æœ¬é¢˜æ•°æ®èŒƒå›´ä¸‹ **C++ / Python éƒ½ä¼šè¶…æ—¶**

---

### 2ï¸âƒ£ ä¿®æ­£åçš„æ ‡å‡†æ€è·¯ï¼ˆé¢‘æ¬¡ + æ»‘åŠ¨çª—å£ï¼‰

**æ ¸å¿ƒæ€æƒ³å‡çº§ï¼š**
- æ’åºçš„æœ¬è´¨æ˜¯ï¼š**æ¯”è¾ƒå­—ç¬¦çš„"å¤šé‡é›†åˆ"æ˜¯å¦ç›¸åŒ**
- æ’åºæ˜¯"é‡è®¡ç®—"ï¼Œè€Œæˆ‘ä»¬å…¶å®åªéœ€è¦ï¼š
  > æ¯ä¸ªå­—ç¬¦å‡ºç°äº†å‡ æ¬¡

**å…³é”®è§‚å¯Ÿï¼š**
- å­—ç¬¦é›†å›ºå®šï¼ˆ`a`â€“`z`ï¼Œå…± 26 ä¸ªï¼‰
- å¯ä»¥ç”¨é•¿åº¦ä¸º 26 çš„æ•°ç»„è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²

**ä¿®æ­£åçš„æ€è·¯ï¼š**
1. ç”¨ `patternFreq[26]` ç»Ÿè®¡ `p` çš„å­—ç¬¦é¢‘æ¬¡
2. ç”¨ `windowFreq[26]` ç»´æŠ¤å½“å‰çª—å£çš„å­—ç¬¦é¢‘æ¬¡
3. åˆå§‹åŒ–ç¬¬ä¸€ä¸ªçª—å£
4. çª—å£æ¯æ¬¡å³ç§»ä¸€æ ¼ï¼š
   - åŠ ä¸€ä¸ªå­—ç¬¦
   - å‡ä¸€ä¸ªå­—ç¬¦
5. æ¯”è¾ƒä¸¤ä¸ªé¢‘æ¬¡æ•°ç»„æ˜¯å¦ç›¸ç­‰

**å¤æ‚åº¦ï¼š**
- æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`
- ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ï¼ˆ26 ä¸ªå­—æ¯ï¼‰

---

## äºŒã€æˆ‘å¯¹ä¿®æ­£æ€è·¯ä¸­çš„ç–‘é—® & è§£é‡Šæ€»ç»“

### â“ ç–‘é—® 1ï¼šä¸ºä»€ä¹ˆæ¯ä¸ªçª—å£ä¸æ’åºï¼Œè€Œæ’åºæ³•å´èƒ½æƒ³åˆ°ï¼Ÿ

**è§£é‡Šï¼š**
- æ’åºæ˜¯ä¸ºäº†æ„é€ ä¸€ä¸ª"è§„èŒƒåŒ–è¡¨ç¤º"
- é¢‘æ¬¡æ•°ç»„æœ¬èº«å°±æ˜¯ä¸€ä¸ª**æ›´ç›´æ¥ã€æ›´é«˜æ•ˆçš„è§„èŒƒåŒ–è¡¨ç¤º**
- æ’åºæ˜¯"ä¿¡æ¯è¿‡å‰©"çš„åšæ³•

---

### â“ ç–‘é—® 2ï¼šä¸ºä»€ä¹ˆä¸èƒ½æŠŠ `p` çš„æ‰€æœ‰æ’åˆ—éƒ½å­˜èµ·æ¥å¯¹æ¯”ï¼Ÿ

**è§£é‡Šï¼š**
- æ’åˆ—æ•°æ˜¯ `m!`ï¼ˆé˜¶ä¹˜çº§çˆ†ç‚¸ï¼‰
- å³ä½¿ `m = 10`ï¼Œ`10! = 3,628,800`
- å­˜å‚¨å’Œç”Ÿæˆéƒ½ä¸å¯è¡Œ
- æ¯”æ’åºæ³•è¿˜è¦ç³Ÿç³•å¾—å¤š

---

### â“ ç–‘é—® 3ï¼šçª—å£ä¸æ˜¯æ¯æ¬¡åªå³ç§»ä¸€æ ¼å—ï¼Ÿä¸ºä»€ä¹ˆ `right` åˆå§‹æ˜¯ `patternLength`ï¼Ÿ

**å…³é”®æ¾„æ¸…ï¼š**
- **ç¬¬ä¸€ä¸ªçª—å£ `[0, patternLength-1]` å·²ç»åœ¨å¾ªç¯å¤–åˆå§‹åŒ–å¹¶æ£€æŸ¥è¿‡**
- `right` è¡¨ç¤ºçš„æ˜¯ï¼š
  > "ä¸‹ä¸€ä¸ªè¦è¿›å…¥çª—å£çš„å­—ç¬¦ç´¢å¼•"
- å½“ `right = patternLength` æ—¶ï¼š
  - åŠ å…¥çš„æ˜¯ `s[patternLength]`
  - ç§»é™¤çš„æ˜¯ `s[0]`
- çª—å£å®é™…åªå³ç§»äº† **1 æ ¼**

ğŸ‘‰ ä¸æ˜¯"çª—å£è·³äº† patternLength"ï¼Œè€Œæ˜¯"**ç¬¬ä¸€ä¸ªçª—å£è¢«æå‰å¤„ç†äº†**"ã€‚

---

### â“ ç–‘é—® 4ï¼šä»€ä¹ˆæ˜¯æœ‰ç¬¦å· / æ— ç¬¦å·ï¼Ÿä¸ºä»€ä¹ˆè¦ `static_cast<int>`ï¼Ÿ

**æ ¸å¿ƒæ¦‚å¿µï¼š**
- `int` â†’ æœ‰ç¬¦å·ï¼ˆå¯è¡¨ç¤ºè´Ÿæ•°ï¼‰
- `size_t` â†’ æ— ç¬¦å·ï¼ˆä¸èƒ½è¡¨ç¤ºè´Ÿæ•°ï¼‰
- `string::size()` è¿”å›çš„æ˜¯ `size_t`

**é£é™©ï¼š**
- æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ··ç”¨æ¯”è¾ƒ
- å¯èƒ½å¯¼è‡´æéšè”½çš„é€»è¾‘é”™è¯¯ï¼ˆè´Ÿæ•°å˜æˆæå¤§çš„æ­£æ•°ï¼‰

**è§£å†³æ–¹å¼ï¼š**
```cpp
const int textLength = static_cast<int>(s.size());
```

ğŸ‘‰ æ˜ç¡®ã€å®‰å…¨ã€å·¥ç¨‹çº§å†™æ³•

---

## ä¸‰ã€ä¸¤ç§å®Œæ•´è§£æ³•ï¼ˆC++ / Python3ï¼‰

### âœ… C++ è§£æ³•ï¼ˆé¢‘æ¬¡ + æ»‘åŠ¨çª—å£ï¼Œæ¨èï¼‰

```cpp
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        vector<int> resultIndices;
        const int textLength = static_cast<int>(s.size());
        const int patternLength = static_cast<int>(p.size());
        if (textLength < patternLength) return resultIndices;

        vector<int> patternFreq(26, 0);
        vector<int> windowFreq(26, 0);

        for (char ch : p) {
            patternFreq[ch - 'a']++;
        }

        for (int i = 0; i < patternLength; i++) {
            windowFreq[s[i] - 'a']++;
        }

        if (windowFreq == patternFreq) {
            resultIndices.push_back(0);
        }

        for (int right = patternLength; right < textLength; right++) {
            windowFreq[s[right] - 'a']++;
            windowFreq[s[right - patternLength] - 'a']--;
            if (windowFreq == patternFreq) {
                resultIndices.push_back(right - patternLength + 1);
            }
        }
        return resultIndices;
    }
};
```

---

### âœ… Python 3 è§£æ³•ï¼ˆåŒä¸€æ€è·¯ï¼‰

```python
class Solution:
    def findAnagrams(self, s: str, p: str):
        result = []
        n, m = len(s), len(p)
        if n < m:
            return result

        pattern_freq = [0] * 26
        window_freq = [0] * 26

        for ch in p:
            pattern_freq[ord(ch) - ord('a')] += 1

        for i in range(m):
            window_freq[ord(s[i]) - ord('a')] += 1

        if window_freq == pattern_freq:
            result.append(0)

        for right in range(m, n):
            window_freq[ord(s[right]) - ord('a')] += 1
            window_freq[ord(s[right - m]) - ord('a')] -= 1
            if window_freq == pattern_freq:
                result.append(right - m + 1)

        return result
```

---

## å››ã€è¡¥å……æ€»ç»“ï¼ˆéå¸¸é‡è¦ï¼‰

### 1ï¸âƒ£ æ’åº vs é¢‘æ¬¡çš„æœ¬è´¨å¯¹æ¯”

| æ–¹æ³• | æœ¬è´¨ | æ˜¯å¦é‡ç®— | å¤æ‚åº¦ |
|------|------|----------|--------|
| æ’åº | æ„é€ å­—ç¬¦ä¸² key | æ¯ä¸ªçª—å£ | O(nÂ·m log m) |
| é¢‘æ¬¡ | æ„é€ å¤šé‡é›†åˆ | å¢é‡æ›´æ–° | O(n) |

---

### 2ï¸âƒ£ æ»‘åŠ¨çª—å£çš„"æ­£ç¡®ç›´è§‰"

> æ»‘åŠ¨çª—å£ä¸æ˜¯"æŒ‡é’ˆæ€ä¹ˆèµ°"ï¼Œè€Œæ˜¯"**çª—å£æ•´ä½“å¦‚ä½•ä¿æŒå›ºå®šçº¦æŸå¹¶å¹³ç§»**"ã€‚

---

### 3ï¸âƒ£ ä»€ä¹ˆæ—¶å€™è¯¥ç”¨é€’å½’ï¼Ÿï¼ˆä»æœ¬é¢˜åæ¨ï¼‰

- æœ¬é¢˜æ˜¯ **çº¿æ€§æ¨è¿› + å±€éƒ¨çŠ¶æ€**
- æ²¡æœ‰å›æº¯
- ä¸é€‚åˆé€’å½’
- é€’å½’é€‚åˆï¼šæ ‘ã€åˆ†æ²»ã€å›æº¯ã€ç»“æ„è‡ªç›¸ä¼¼é—®é¢˜

---

### 4ï¸âƒ£ ä¸€å¥è¯ç»ˆææ€»ç»“

> **è¿™é“é¢˜çš„å…³é”®ä¸æ˜¯"ä¼šä¸ä¼šæ’åº"ï¼Œè€Œæ˜¯èƒ½å¦æ„è¯†åˆ°ï¼šæ’åºæ˜¯åœ¨é‡å¤è®¡ç®—ï¼Œè€Œæ»‘åŠ¨çª—å£å¯ä»¥å¤ç”¨ä¿¡æ¯ã€‚**

---

## ğŸ“¦ æœ¬åœ°è¿è¡Œ

### æ–‡ä»¶
- `find_anagrams.py`
- `find_anagrams.cpp`

### è¾“å…¥æ ¼å¼ï¼ˆæ¯ç»„ä¸¤è¡Œï¼Œç›´åˆ° EOF é€€å‡ºï¼‰
- ç¬¬ 1 è¡Œï¼šå­—ç¬¦ä¸² `s`
- ç¬¬ 2 è¡Œï¼šå­—ç¬¦ä¸² `p`

### è¿è¡Œå‘½ä»¤
```bash
# Python
python3 find_anagrams.py

# C++
g++ -std=c++17 find_anagrams.cpp -o find_anagrams && ./find_anagrams
```

### ç¤ºä¾‹
```
è¾“å…¥ï¼š
cbaebabacd
abc

è¾“å‡ºï¼š[0,6]
```

