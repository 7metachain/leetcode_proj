# 3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² â€”â€” å­¦ä¹ ç¬”è®°

---

## ä¸€ã€é¢˜ç›®ç†è§£

### é¢˜ç›®
ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæ‰¾åˆ°å…¶ä¸­ **ä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿è¿ç»­å­ä¸²**ï¼Œè¿”å›å®ƒçš„é•¿åº¦ï¼ˆå¯æ‰©å±•ä¸ºè¿”å›å­ä¸²æœ¬èº«ï¼‰ã€‚

### å…³é”®ç‚¹
- **å­ä¸²**ï¼šå¿…é¡»è¿ç»­
- **æ¡ä»¶**ï¼šä¸èƒ½æœ‰é‡å¤å­—ç¬¦
- **è¦çš„æ˜¯**ï¼šæœ€é•¿

---

## äºŒã€æˆ‘çš„æœ€åˆç›´è§‰æ€è·¯ï¼ˆéå¸¸æœ‰ä»·å€¼ï¼‰

**æˆ‘çš„ç›´è§‰æ˜¯ï¼š**
1. ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸²ï¼ˆåªéå†ä¸€æ¬¡ï¼‰
2. é‡åˆ°ä¸é‡å¤å­—ç¬¦ï¼Œå°±ä¸æ–­æ‰©å±•å½“å‰å­ä¸²
3. ä¸€æ—¦é‡åˆ°é‡å¤å­—ç¬¦ï¼š
   - æ‰¾åˆ°è¿™ä¸ªé‡å¤å­—ç¬¦ä¹‹å‰å‡ºç°çš„ä½ç½®ï¼ˆindexï¼‰
   - ä»é‚£é‡Œå¼€å§‹ï¼Œå°è¯•ä¸€ä¸ªæ–°çš„æ»‘åŠ¨çª—å£
   - å¦‚æœåé¢çª—å£æ‰©å±•å¾—ä¸å¤Ÿå¤§ï¼Œåˆé‡åˆ°é‡å¤ï¼Œå°±å†æ¬¡èˆå¼ƒä¸€éƒ¨åˆ†

ğŸ‘‰ **è¯„ä»·ï¼š**
è¿™æ˜¯ä¸€ä¸ªå®Œå…¨æ­£ç¡®çš„å¤§æ–¹å‘ï¼Œæœ¬è´¨å·²ç»æ˜¯ã€Œæ»‘åŠ¨çª—å£ + å†²çªå¤„ç†ã€ã€‚

é—®é¢˜ä¸åœ¨"æ–¹å‘é”™"ï¼Œè€Œåœ¨äºï¼š
> è§„åˆ™æ²¡æœ‰è¢«å‹ç¼©æˆä¸€ä¸ªæ¸…æ™°ã€ç®€å•ã€å¯æ‰§è¡Œçš„æ­¥éª¤

---

## ä¸‰ã€æˆ‘å½“æ—¶æœ€å¤§çš„ç–‘æƒ‘ï¼ˆå…³é”®çªç ´ç‚¹ï¼‰

### ç–‘æƒ‘ 1ï¼š
> "æŠŠ left ç›´æ¥æŒªåˆ°é‡å¤å­—ç¬¦ä¸Šä¸€æ¬¡å‡ºç°ä½ç½®çš„å³è¾¹ï¼Œä¼šä¸ä¼šä¸¢æ‰åƒ aw è¿™æ ·çš„æœ€é•¿å­ä¸²ï¼Ÿ"

ä¾‹å¦‚å­—ç¬¦ä¸²ï¼š
```
a w w
```

**æ‹…å¿ƒï¼š**
- å½“é‡åˆ°ç¬¬äºŒä¸ª `w` æ—¶ï¼Œçª—å£è¢«ç¼©æˆ `"w"`
- `"aw"` å¥½åƒè¢«æ‰”æ‰äº†

---

## å››ã€ä¸ºä»€ä¹ˆè¿™ä¸ªç–‘æƒ‘çœ‹èµ·æ¥éå¸¸åˆç†

å› ä¸ºæˆ‘åœ¨æ½œæ„è¯†é‡Œï¼ŒæŠŠè¿™é“é¢˜ç†è§£æˆï¼š
> "æœ€ç»ˆç•™ä¸‹æ¥çš„é‚£ä¸ªçª—å£å°±æ˜¯ç­”æ¡ˆ"

ä½†äº‹å®ä¸Šï¼Œ**è¿™æ˜¯é”™è¯¯çš„ç†è§£æ–¹å¼**ã€‚

---

## äº”ã€çœŸæ­£æ­£ç¡®çš„è§†è§’ï¼ˆæ ¸å¿ƒè½¬å˜ï¼‰

### å…³é”®è½¬å˜ä¸€å¥è¯ï¼š

> **æœ€é•¿å­ä¸²ä¸æ˜¯"æœ€åç•™ä¸‹æ¥çš„"ï¼Œè€Œæ˜¯"éå†è¿‡ç¨‹ä¸­å‡ºç°è¿‡çš„æœ€å¤§åˆæ³•çª—å£"**

ä¹Ÿå°±æ˜¯è¯´ï¼š
- æ¯ä¸€æ­¥ï¼Œåªè¦çª—å£æ˜¯åˆæ³•çš„ï¼ˆæ— é‡å¤ï¼‰
- å°±ç«‹åˆ»ç”¨å®ƒæ›´æ–°ç­”æ¡ˆ
- å³ä½¿ä¹‹åçª—å£è¢«ç¼©å°ï¼Œç­”æ¡ˆä¹Ÿå·²ç»è®°å½•äº†

---

## å…­ã€ç”¨ `aww` å½»åº•è§£å†³ç–‘æƒ‘

å­—ç¬¦ä¸²ï¼š`a w w`

**right = 0**
- çª—å£ï¼š`"a"`
- â†’ è®°å½•æœ€å¤§é•¿åº¦ = 1

**right = 1**
- çª—å£ï¼š`"aw"`
- â†’ è®°å½•æœ€å¤§é•¿åº¦ = 2

**right = 2ï¼ˆé‡åˆ°é‡å¤ wï¼‰**
- å½“å‰çª—å£ `"aww"` âŒ éæ³•
- å¿…é¡»ç«‹åˆ»ä¿®å¤
- `left` ç§»åˆ°ä¸Šä¸€ä¸ª `w` çš„å³è¾¹
- æ–°çª—å£ `"w"`ï¼ˆåˆæ³•ï¼Œä½†æ›´çŸ­ï¼‰

ğŸ‘‰ **å…³é”®ç‚¹ï¼š**
`"aw"` åœ¨ `right=1` æ—¶å·²ç»è¢«è®°å½•ï¼Œæ‰€ä»¥å³ä½¿ç°åœ¨æŠŠå®ƒ"æ‰”æ‰"ï¼Œç­”æ¡ˆä¹Ÿä¸ä¼šä¸¢ã€‚

---

## ä¸ƒã€æ»‘åŠ¨çª—å£çš„æœ¬è´¨è§„åˆ™ï¼ˆäººè¯ç‰ˆï¼‰

æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªçª—å£ `[left, right]`ï¼Œæ»¡è¶³ï¼š
- çª—å£å†… **æ²¡æœ‰é‡å¤å­—ç¬¦**
- `right` ä¸€ç›´å‘å³èµ°
- `left` åªä¼šå‘å³ç§»åŠ¨ï¼Œç»ä¸å›é€€

å½“ `right` æŒ‡å‘ä¸€ä¸ªå­—ç¬¦ `c`ï¼š
- å¦‚æœ `c` æ²¡åœ¨å½“å‰çª—å£é‡Œå‡ºç°è¿‡ â†’ æ‰©å±•çª—å£
- å¦‚æœ `c` åœ¨çª—å£é‡Œå‡ºç°è¿‡ â†’ å½“å‰çª—å£ç«‹åˆ»éæ³• â†’ å¿…é¡»æŠŠ `left` ç§»åˆ° `c` ä¸Šä¸€æ¬¡å‡ºç°ä½ç½® + 1

---

## å…«ã€ä¸ºä»€ä¹ˆè¦ `left = max(left, last[c] + 1)`ï¼Ÿ

è¿™æ˜¯ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼š

```
abba
```

å½“å¤„ç†åˆ°æœ€åä¸€ä¸ª `a` æ—¶ï¼š
- ä¸Šä¸€ä¸ª `a` åœ¨ index 0
- ä½†å½“å‰ `left` å·²ç»åœ¨ 2ï¼ˆå› ä¸ºå¤„ç†è¿‡ `b`ï¼‰
- ä¸èƒ½æŠŠ `left` æ‹‰å›åˆ° 1

æ‰€ä»¥è§„åˆ™å¿…é¡»æ˜¯ï¼š
> **left åªèƒ½å¾€å³ï¼Œä¸è®¸å¾€å›**

---

## ä¹ã€æ ‡å‡†è§£æ³•ï¼ˆæœ€ç»ˆå½¢æ€ï¼‰

### Pythonï¼ˆå¯ä¿å­˜æœ€é•¿å­ä¸²ï¼‰

```python
s = "pwwkew"

last = {}
left = 0
bestL = 0
bestLen = 0

for right, c in enumerate(s):
    if c in last:
        left = max(left, last[c] + 1)

    last[c] = right
    curLen = right - left + 1

    if curLen > bestLen:
        bestLen = curLen
        bestL = left

print(bestLen)
print(s[bestL:bestL + bestLen])
```

### C++

```cpp
unordered_map<char,int> last;
int left = 0, bestL = 0, bestLen = 0;

for(int right = 0; right < s.size(); right++){
    char c = s[right];

    if(last.count(c)){
        left = max(left, last[c] + 1);
    }
    last[c] = right;

    int curLen = right - left + 1;
    if(curLen > bestLen){
        bestLen = curLen;
        bestL = left;
    }
}
```

---

## åã€å¾ªåºæ¸è¿›çš„å­¦ä¹ è·¯å¾„ï¼ˆæœ€é‡è¦çš„éƒ¨åˆ†ï¼‰

**ç›®æ ‡ï¼šä¸æ˜¯èƒŒä»£ç ï¼Œè€Œæ˜¯"æ¯ä¸€æ­¥éƒ½èƒ½è§£é‡Š"**

| Step | å†…å®¹ | è¯´æ˜ |
|------|------|------|
| Step 0 | æšä¸¾æ‰€æœ‰å­ä¸² | ç†è§£ä»€ä¹ˆæ˜¯"è¿ç»­" |
| Step 1 | å†™å‡½æ•°åˆ¤æ–­æ˜¯å¦æœ‰é‡å¤ | `no_repeat(sub)` |
| Step 2 | æš´åŠ›æ­£ç¡®è§£ï¼ˆO(nÂ³)ï¼‰ | å…ˆæŠŠé¢˜æ„å½»åº•åšå¯¹ |
| Step 3 | æ»‘åŠ¨çª—å£ + set | é‡åˆ°é‡å¤å°± while ç¼©çª—å£ |
| Step 4 | æ»‘åŠ¨çª—å£ + last å­—å…¸ | é‡å¤æ—¶ left ç›´æ¥è·³ |
| Step 5 | è®°å½•æœ€é•¿å­ä¸² | ä¿å­˜ bestL å’Œ bestLen |

ï¼ˆä½ å‰é¢å·²ç»æ‹¿åˆ°æ¯ä¸€æ­¥çš„å®Œæ•´ä»£ç ï¼‰

---

## åä¸€ã€æˆ‘ç°åœ¨å¦‚ä½•åˆ¤æ–­è‡ªå·±"çœŸçš„æŒæ¡äº†"

å¦‚æœæˆ‘èƒ½ä¸çœ‹ç­”æ¡ˆï¼Œè¯´æ¸…æ¥šä¸‹é¢ä¸‰å¥è¯ï¼Œå°±æ˜¯çœŸçš„ä¼šäº†ï¼š

1. **ä¸ºä»€ä¹ˆä¸€é‡åˆ°é‡å¤å°±å¿…é¡»ç«‹åˆ»ç§»åŠ¨ left**
2. **ä¸ºä»€ä¹ˆ left åªèƒ½å¾€å³ï¼Œä¸èƒ½å¾€å›**
3. **ä¸ºä»€ä¹ˆæœ€é•¿å­ä¸²ä¸ä¼šå› ä¸ºç§»åŠ¨ left è€Œä¸¢å¤±**

---

## åäºŒã€æœ€åä¸€å¥ç»™æœªæ¥çš„ä½ 

> ä½ ç°åœ¨çš„"ä¼¼æ‡‚éæ‡‚"ï¼Œä¸æ˜¯å¤±è´¥ï¼Œè€Œæ˜¯ç†è§£æ­£åœ¨å½¢æˆçš„ä¿¡å·ã€‚

---

## ğŸ“¦ æœ¬åœ°è¿è¡Œ

### æ–‡ä»¶
- `longest_substring.py`
- `longest_substring.cpp`

### è¾“å…¥æ ¼å¼ï¼ˆæ¯è¡Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç›´åˆ° EOF é€€å‡ºï¼‰
- `abcabcbb`
- `pwwkew`

### è¿è¡Œå‘½ä»¤
```bash
# Python
python3 longest_substring.py

# C++
g++ -std=c++17 longest_substring.cpp -o longest_substring && ./longest_substring
```

### ç¤ºä¾‹
```
è¾“å…¥ï¼šabcabcbb
è¾“å‡ºï¼š3 "abc"

è¾“å…¥ï¼špwwkew
è¾“å‡ºï¼š3 "wke"
```
